version: '3'
services:
  web:
    build: ./flask
    ports:
      - "5000:5000"
    networks:
      legacy:
        ipv4_address: 172.70.0.2
  parity:
    volumes:
      - "/Users/Brock/.local/share/io.parity.ethereum/docker/:/root/.local/share/io.parity.ethereum/"
    build: ./parity
    command: ["--config", "/root/.local/share/io.parity.ethereum/config.toml", "--cache-size", "4096"]
    ports:
      - "8180:8180/udp"
      - "8545:8545"
      - "8545:8545/udp"
      - "8546:8546"
      - "8546:8546/udp"
      - "30303:30303"
      - "30303:30303/udp"
    networks:
      legacy:
        ipv4_address: 172.70.0.3
  redis:
    image: redis
    ports:
      - "6379:6379"
    networks:
      legacy:
        ipv4_address: 172.70.0.4
  maildev:
    image: djfarrelly/maildev
    ports:
      - "1080:80"
      - "25:25"
    networks:
      legacy:
        ipv4_address: 172.70.0.5

networks:
  legacy:
    driver: bridge
    ipam:
      driver: default
      config:
        - subnet: 172.70.0.0/16
